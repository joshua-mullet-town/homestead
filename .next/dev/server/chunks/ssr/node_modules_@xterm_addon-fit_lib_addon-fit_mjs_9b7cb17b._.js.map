{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/joshuamullet/code/homestead/node_modules/%40xterm/addon-fit/src/FitAddon.ts"],"sourcesContent":["/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport type { Terminal, ITerminalAddon } from '@xterm/xterm';\nimport type { FitAddon as IFitApi } from '@xterm/addon-fit';\nimport { IRenderDimensions } from 'browser/renderer/shared/Types';\nimport { ViewportConstants } from 'browser/shared/Constants';\n\ninterface ITerminalDimensions {\n  /**\n   * The number of rows in the terminal.\n   */\n  rows: number;\n\n  /**\n   * The number of columns in the terminal.\n   */\n  cols: number;\n}\n\nconst MINIMUM_COLS = 2;\nconst MINIMUM_ROWS = 1;\n\nexport class FitAddon implements ITerminalAddon , IFitApi {\n  private _terminal: Terminal | undefined;\n\n  public activate(terminal: Terminal): void {\n    this._terminal = terminal;\n  }\n\n  public dispose(): void {}\n\n  public fit(): void {\n    const dims = this.proposeDimensions();\n    if (!dims || !this._terminal || isNaN(dims.cols) || isNaN(dims.rows)) {\n      return;\n    }\n\n    // TODO: Remove reliance on private API\n    const core = (this._terminal as any)._core;\n\n    // Force a full render\n    if (this._terminal.rows !== dims.rows || this._terminal.cols !== dims.cols) {\n      core._renderService.clear();\n      this._terminal.resize(dims.cols, dims.rows);\n    }\n  }\n\n  public proposeDimensions(): ITerminalDimensions | undefined {\n    if (!this._terminal) {\n      return undefined;\n    }\n\n    if (!this._terminal.element || !this._terminal.element.parentElement) {\n      return undefined;\n    }\n\n    // TODO: Remove reliance on private API\n    const core = (this._terminal as any)._core;\n    const dims: IRenderDimensions = core._renderService.dimensions;\n\n    if (dims.css.cell.width === 0 || dims.css.cell.height === 0) {\n      return undefined;\n    }\n\n    const scrollbarWidth = (this._terminal.options.scrollback === 0\n      ? 0\n      : (this._terminal.options.overviewRuler?.width || ViewportConstants.DEFAULT_SCROLL_BAR_WIDTH));\n\n    const parentElementStyle = window.getComputedStyle(this._terminal.element.parentElement);\n    const parentElementHeight = parseInt(parentElementStyle.getPropertyValue('height'));\n    const parentElementWidth = Math.max(0, parseInt(parentElementStyle.getPropertyValue('width')));\n    const elementStyle = window.getComputedStyle(this._terminal.element);\n    const elementPadding = {\n      top: parseInt(elementStyle.getPropertyValue('padding-top')),\n      bottom: parseInt(elementStyle.getPropertyValue('padding-bottom')),\n      right: parseInt(elementStyle.getPropertyValue('padding-right')),\n      left: parseInt(elementStyle.getPropertyValue('padding-left'))\n    };\n    const elementPaddingVer = elementPadding.top + elementPadding.bottom;\n    const elementPaddingHor = elementPadding.right + elementPadding.left;\n    const availableHeight = parentElementHeight - elementPaddingVer;\n    const availableWidth = parentElementWidth - elementPaddingHor - scrollbarWidth;\n    const geometry = {\n      cols: Math.max(MINIMUM_COLS, Math.floor(availableWidth / dims.css.cell.width)),\n      rows: Math.max(MINIMUM_ROWS, Math.floor(availableHeight / dims.css.cell.height))\n    };\n    return geometry;\n  }\n}\n"],"names":["MINIMUM_COLS", "MINIMUM_ROWS", "FitAddon", "terminal", "dims", "core", "scrollbarWidth", "parentElementStyle", "parentElementHeight", "parentElementWidth", "elementStyle", "elementPadding", "elementPaddingVer", "elementPaddingHor", "availableHeight", "availableWidth"],"mappings":";;;;;;;;;;;;;;;;;;iGAsBA,IAAMA,IAAe,GACfC,IAAe,GAERC,IAAN,KAAmD;IAGjD,SAASC,CAAAA,EAA0B;QACxC,IAAA,CAAK,SAAA,GAAYA;IACnB;IAEO,UAAgB,CAAC;IAEjB,MAAY;QACjB,IAAMC,IAAO,IAAA,CAAK,iBAAA,CAAkB;QACpC,IAAI,CAACA,KAAQ,CAAC,IAAA,CAAK,SAAA,IAAa,MAAMA,EAAK,IAAI,KAAK,MAAMA,EAAK,IAAI,GACjE;QAIF,IAAMC,IAAQ,IAAA,CAAK,SAAA,CAAkB,KAAA;QAAA,CAGjC,IAAA,CAAK,SAAA,CAAU,IAAA,KAASD,EAAK,IAAA,IAAQ,IAAA,CAAK,SAAA,CAAU,IAAA,KAASA,EAAK,IAAA,KAAA,CACpEC,EAAK,cAAA,CAAe,KAAA,CAAM,GAC1B,IAAA,CAAK,SAAA,CAAU,MAAA,CAAOD,EAAK,IAAA,EAAMA,EAAK,IAAI,CAAA;IAE9C;IAEO,oBAAqD;QAK1D,IAJI,CAAC,IAAA,CAAK,SAAA,IAIN,CAAC,IAAA,CAAK,SAAA,CAAU,OAAA,IAAW,CAAC,IAAA,CAAK,SAAA,CAAU,OAAA,CAAQ,aAAA,EACrD;QAKF,IAAMA,IADQ,IAAA,CAAK,SAAA,CAAkB,KAAA,CACA,cAAA,CAAe,UAAA;QAEpD,IAAIA,EAAK,GAAA,CAAI,IAAA,CAAK,KAAA,KAAU,KAAKA,EAAK,GAAA,CAAI,IAAA,CAAK,MAAA,KAAW,GACxD;QAGF,IAAME,IAAkB,IAAA,CAAK,SAAA,CAAU,OAAA,CAAQ,UAAA,KAAe,IAC1D,IACC,IAAA,CAAK,SAAA,CAAU,OAAA,CAAQ,aAAA,EAAe,SAAS,IAE9CC,IAAqB,OAAO,gBAAA,CAAiB,IAAA,CAAK,SAAA,CAAU,OAAA,CAAQ,aAAa,GACjFC,IAAsB,SAASD,EAAmB,gBAAA,CAAiB,QAAQ,CAAC,GAC5EE,IAAqB,KAAK,GAAA,CAAI,GAAG,SAASF,EAAmB,gBAAA,CAAiB,OAAO,CAAC,CAAC,GACvFG,IAAe,OAAO,gBAAA,CAAiB,IAAA,CAAK,SAAA,CAAU,OAAO,GAC7DC,IAAiB;YACrB,KAAK,SAASD,EAAa,gBAAA,CAAiB,aAAa,CAAC;YAC1D,QAAQ,SAASA,EAAa,gBAAA,CAAiB,gBAAgB,CAAC;YAChE,OAAO,SAASA,EAAa,gBAAA,CAAiB,eAAe,CAAC;YAC9D,MAAM,SAASA,EAAa,gBAAA,CAAiB,cAAc,CAAC;QAC9D,GACME,IAAoBD,EAAe,GAAA,GAAMA,EAAe,MAAA,EACxDE,IAAoBF,EAAe,KAAA,GAAQA,EAAe,IAAA,EAC1DG,IAAkBN,IAAsBI,GACxCG,IAAiBN,IAAqBI,IAAoBP;QAKhE,OAJiB;YACf,MAAM,KAAK,GAAA,CAAIN,GAAc,KAAK,KAAA,CAAMe,IAAiBX,EAAK,GAAA,CAAI,IAAA,CAAK,KAAK,CAAC;YAC7E,MAAM,KAAK,GAAA,CAAIH,GAAc,KAAK,KAAA,CAAMa,IAAkBV,EAAK,GAAA,CAAI,IAAA,CAAK,MAAM,CAAC;QACjF;IAEF;AACF"}}]
}